# FAQ: ĞÑ‚Ğ²ĞµÑ‚Ñ‹ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ

## 1. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ repository Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ² infrastructure?

**Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ!** Ğ¯ Ğ¿ĞµÑ€ĞµĞ¼ĞµÑÑ‚Ğ¸Ğ» `internal/repository/` â†’ `internal/infrastructure/repository/`

### ĞĞ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:
```
internal/
â”œâ”€â”€ domain/                    # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹ Ğ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â””â”€â”€ repository/           # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹!
â”‚       â””â”€â”€ event.go          # type EventRepository interface {...}
â”‚
â”œâ”€â”€ usecase/                   # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹ Ğ¸Ğ· domain
â”‚
â””â”€â”€ infrastructure/            # Ğ’Ğ¡Ğ• Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
    â”œâ”€â”€ repository/            # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ²
    â”‚   â”œâ”€â”€ postgres/         # implements domain.EventRepository
    â”‚   â””â”€â”€ cache/            # implements domain.CacheRepository
    â””â”€â”€ kafka/                 # Kafka consumer/producer
```

### ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ñ‚Ğ°Ğº Ğ»ÑƒÑ‡ÑˆĞµ?
âœ… **Ğ›Ğ¾Ğ³Ğ¸Ñ‡Ğ½ĞµĞµ**: Ğ²ÑĞµ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ  
âœ… **Ğ§Ğ¸Ñ‰Ğµ**: infrastructure = "Ğ²ÑÑ‘ Ñ‡Ñ‚Ğ¾ ÑĞ½Ğ°Ñ€ÑƒĞ¶Ğ¸ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ"  
âœ… **Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ**: repository Ğ¸ kafka Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¸  

## 2. Handler - ÑÑ‚Ğ¾ ÑĞ»Ğ¾Ğ¹ Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸? ĞšĞ°Ğº Ğ²ÑÑ‘ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¾?

**Ğ”Ğ°, handler = Presentation Layer.**

### ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     cmd/ingestor/main.go                     â”‚
â”‚                  (Dependency Injection Container)            â”‚
â”‚                                                              â”‚
â”‚  func main() {                                               â”‚
â”‚    // 1. Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°                                     â”‚
â”‚    db := postgres.Connect(cfg.PostgresDSN)                  â”‚
â”‚    kafkaConsumer := kafka.NewConsumer(cfg.Brokers)          â”‚
â”‚                                                              â”‚
â”‚    // 2. Repositories (implements domain interfaces)        â”‚
â”‚    eventRepo := postgres.NewEventRepo(db)                   â”‚
â”‚                                                              â”‚
â”‚    // 3. Domain Services                                    â”‚
â”‚    dedupSvc := service.NewDeduplication(eventRepo)          â”‚
â”‚                                                              â”‚
â”‚    // 4. Use Cases                                          â”‚
â”‚    ingestUC := usecase.NewIngestEvents(eventRepo, dedupSvc) â”‚
â”‚                                                              â”‚
â”‚    // 5. Handler (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ use case)                     â”‚
â”‚    handler := func(msg) {                                    â”‚
â”‚      event := unmarshal(msg)                                â”‚
â”‚      ingestUC.Execute(ctx, event)                           â”‚
â”‚    }                                                         â”‚
â”‚                                                              â”‚
â”‚    // 6. Ğ—Ğ°Ğ¿ÑƒÑĞº                                             â”‚
â”‚    kafkaConsumer.Consume(ctx, handler)                      â”‚
â”‚  }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```
[Kafka] â†’ Consumer â†’ Handler â†’ UseCase â†’ Repository â†’ [DB]
                        â†“          â†“
                    Validation  Domain Logic
```

ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ `docs/FLOW.md` - Ñ‚Ğ°Ğ¼ ĞµÑÑ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼!

## 3. ĞŸĞ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ - Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ?

### âœ… Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸

Ğ¯ ÑĞ¾Ğ·Ğ´Ğ°Ğ» Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ `000002_auto_partition_function.up.sql` Ñ SQL-Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸:

```sql
-- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ½Ğ° N Ğ¼ĞµÑÑÑ†ĞµĞ² Ğ²Ğ¿ĞµÑ€Ñ‘Ğ´
SELECT ensure_partitions_exist(6);
```

### 3 ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

**1. ĞŸÑ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ (Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ®):**
```go
// cmd/ingestor/main.go
func main() {
    db := connectDB()
    
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ
    _, err := db.Exec(ctx, "SELECT ensure_partitions_exist(3)")
    if err != nil {
        log.Warn("Failed to create partitions", err)
    }
    
    // ... Ğ·Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ°
}
```

**2. Ğ§ĞµÑ€ĞµĞ· cron (Ñ€Ğ°Ğ· Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ):**
```bash
# Ğ’ crontab
0 0 * * 0 docker-compose exec -T postgres psql -U app_user -d network_events -c "SELECT ensure_partitions_exist(3);"
```

**3. Ğ’Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· Makefile:**
```bash
make auto-partitions  # Ğ¡Ğ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ½Ğ° 6 Ğ¼ĞµÑÑÑ†ĞµĞ²
```

### ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ½ÑƒĞ¶Ğ½Ñ‹?

**Ğ¡ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸ÑĞ¼Ğ¸:**
- Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° 1 Ğ´ĞµĞ½ÑŒ = ÑĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ 1 Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ñ (~30GB)
- Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… = DROP TABLE (Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾)
- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğµ Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ

**Ğ‘ĞµĞ· Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¹:**
- Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° 1 Ğ´ĞµĞ½ÑŒ = ÑĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑÑ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ (~1TB+)
- Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ = Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ DELETE Ñ VACUUM
- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ¾Ğ³Ñ€Ğ¾Ğ¼Ğ½Ñ‹Ğµ

### ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ±ĞµĞ· Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¹?

Ğ”Ğ°, Ğ½Ğ¾ Ğ¢ĞĞ›Ğ¬ĞšĞ ĞµÑĞ»Ğ¸:
- ĞĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ¾Ğ±ÑŠÑ‘Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (< 100M Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹)
- ĞĞµ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ²Ñ‹ÑĞ¾ĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
- Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¶Ğ¸Ğ²ÑƒÑ‚ Ğ½ĞµĞ´Ğ¾Ğ»Ğ³Ğ¾ (< 1 Ğ¼ĞµÑÑÑ†Ğ°)

Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ° Ñ Ğ¼Ğ¸Ğ»Ğ»Ğ¸Ğ¾Ğ½Ğ°Ğ¼Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ - **Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹**.

## 4. Ğ§Ñ‚Ğ¾ Ğ·Ğ° Ğ¿Ğ°Ğ¿ĞºĞ° pkg/?

### pkg/ = ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğ¹ ĞºĞ¾Ğ´

```
pkg/
â”œâ”€â”€ pb/              # Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ protobuf (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
â”œâ”€â”€ logger/          # ĞĞ±Ñ‘Ñ€Ñ‚ĞºĞ° Ğ½Ğ°Ğ´ zap/zerolog
â””â”€â”€ utils/           # Ğ¥ĞµĞ»Ğ¿ĞµÑ€Ñ‹ (time, validation, etc)

internal/            # ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ (Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
â”œâ”€â”€ domain/
â”œâ”€â”€ usecase/
â””â”€â”€ infrastructure/
```

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:
- ĞšĞ¾Ğ´ Ğ² `pkg/` Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ²Ğ½Ğµ:
  ```go
  import "github.com/you/project/pkg/logger"
  ```

- ĞšĞ¾Ğ´ Ğ² `internal/` Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² (Go Ğ·Ğ°Ğ¿Ñ€ĞµÑ‚Ğ¸Ñ‚)

### ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ pkg/?

âœ… **Ğ”Ğ°:**
- Protobuf Ñ‚Ğ¸Ğ¿Ñ‹ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ API)
- Ğ›Ğ¾Ğ³Ğ³ĞµÑ€ (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ³Ğ¾Ğ´Ğ¸Ñ‚ÑŒÑÑ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ…)
- ĞĞ±Ñ‰Ğ¸Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹

âŒ **ĞĞµÑ‚:**
- Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° â†’ `internal/domain`
- Use cases â†’ `internal/usecase`
- Repositories â†’ `internal/infrastructure/repository`

## 5. Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ Docker - ĞºĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚?

### ğŸ¯ Ğ“Ğ›ĞĞ’ĞĞĞ•: Docker Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹!

```bash
# Ğ ĞµĞ¶Ğ¸Ğ¼ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ (Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ®):

# 1. Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ² Docker
make up
# Ğ—Ğ°Ğ¿ÑƒÑÑ‚ÑÑ‚ÑÑ: Postgres, Redis, Redpanda

# 2. Go-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ›ĞĞšĞĞ›Ğ¬ĞĞ
go run cmd/ingestor/main.go      # â† Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº!
go run cmd/aggregator/main.go
go run cmd/api/main.go

# ĞĞ½Ğ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑÑ Ğº localhost:5432, localhost:9092, etc.
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°:

âœ… **ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ** - Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ctrl+C Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸  
âœ… **ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚** - breakpoints, pprof  
âœ… **ĞĞµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Docker** - ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸  
âœ… **Ğ£Ğ´Ğ¾Ğ±Ğ½Ñ‹Ğ¹ hot-reload** - Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ air/reflex  

### Hot-reload (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):

```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ air
go install github.com/cosmtrek/air@latest

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¾Ğ¹
make dev-ingestor    # Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ğ» ĞºĞ¾Ğ´ â†’ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ĞµÑÑ‚Ğ°Ñ€Ñ‚
```

### Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Docker (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°):

```bash
# Ğ¡Ğ¾Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼ Ğ²ÑÑ‘ Ğ² Docker
docker-compose up --build

# Ğ˜Ğ»Ğ¸ Ñ€Ğ°ÑĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞ¹ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ² docker-compose.yml
```

### Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ workflow:

```bash
# Ğ”ĞµĞ½ÑŒ 1: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
make init              # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ Postgres, Redis, Kafka, Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

# Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
code internal/...      # ĞŸĞ¸ÑˆĞµÑˆÑŒ ĞºĞ¾Ğ´
go run cmd/ingestor/main.go  # Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµÑˆÑŒ
make test              # Ğ¢ĞµÑÑ‚Ñ‹

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ğ» ĞºĞ¾Ğ´
Ctrl+C                 # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸
go run cmd/ingestor/main.go  # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ (1 ÑĞµĞºÑƒĞ½Ğ´Ğ°!)

# ĞšĞ¾Ğ½ĞµÑ† Ğ´Ğ½Ñ
make down              # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ (Ğ¸Ğ»Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ)

# Production deploy
docker-compose up --build  # Ğ’ÑÑ‘ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ñ…
```

### ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Go-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğº Docker-Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ:

Go-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ `.env` Ñ„Ğ°Ğ¹Ğ»:
```env
POSTGRES_DSN=postgres://app_user:app_password@localhost:5432/network_events
KAFKA_BROKERS=localhost:9092
REDIS_ADDR=localhost:6379
```

Docker Ğ¿Ñ€Ğ¾Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ Ğ½Ğ°Ñ€ÑƒĞ¶Ñƒ:
```yaml
postgres:
  ports:
    - "5432:5432"  # â† localhost:5432 Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
```

Ğ’ÑÑ‘ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚! ğŸ‰

## Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
make logs

# ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº Ğ‘Ğ”
make db-shell

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ¿Ğ¸ĞºĞ¸ Kafka
make kafka-topics

# Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸Ğº
make build-ingestor
./bin/ingestor

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‘ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğ°Ñ…
# Terminal 1:
make run-ingestor

# Terminal 2:
make run-aggregator

# Terminal 3:
make run-api
```

## Ğ ĞµĞ·ÑĞ¼Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹

âœ… **ĞŸĞµÑ€ĞµĞ¼ĞµÑ‰Ñ‘Ğ½ repository** Ğ² `internal/infrastructure/repository/`  
âœ… **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¸** (Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ 000002)  
âœ… **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°** Ğ² Makefile  
âœ… **ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ° Ñ€Ğ¾Ğ»ÑŒ pkg/** (Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ vs internal)  
âœ… **ĞĞ¿Ğ¸ÑĞ°Ğ½ workflow Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸** Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞ¸ Docker  

## Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ `make init` (ĞºĞ¾Ğ³Ğ´Ğ° Docker Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½)
2. ĞĞ°Ñ‡Ğ½Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ domain entities
3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ `make run-ingestor` Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
4. Ğ¡Ğ¼Ğ¾Ñ‚Ñ€Ğ¸ `docs/FLOW.md` Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ² Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

