# üéØ Concurrency –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π (30-40 –º–∏–Ω—É—Ç –Ω–∞ –∑–∞–¥–∞—á—É)

## –ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω—ã–µ (–¥–µ–ª–∞–π –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### 1. Rate Limiter (Token Bucket)
**–í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –Ω–∞ —Å–æ–±–µ—Å–∞—Ö: 80%**

–ù–∞–ø–∏—à–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π rate limiter:
- –ú–∞–∫—Å–∏–º—É–º N –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- –ú–µ—Ç–æ–¥ `Allow() bool`
- –¢–µ—Å—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ goroutines

**–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏:** mutex, time, atomic

---

### 2. Worker Pool
**–í—Ä–µ–º—è: 40 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –Ω–∞ —Å–æ–±–µ—Å–∞—Ö: 70%**

–†–µ–∞–ª–∏–∑—É–π –ø—É–ª –∏–∑ N –≤–æ—Ä–∫–µ—Ä–æ–≤:
- –ß–∏—Ç–∞—é—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –∫–∞–Ω–∞–ª–∞
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- Graceful shutdown
- –ù–µ —Ç–µ—Ä—è—é—Ç –∑–∞–¥–∞—á–∏

**–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏:** channels, WaitGroup, context

---

### 3. Bounded Channel (Semaphore)
**–í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –Ω–∞ —Å–æ–±–µ—Å–∞—Ö: 60%**

–†–µ–∞–ª–∏–∑—É–π –∫–∞–Ω–∞–ª —Å –ª–∏–º–∏—Ç–æ–º:
- –ú–∞–∫—Å–∏–º—É–º N —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ë–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–ø–∏—Å—å –µ—Å–ª–∏ –ø–æ–ª–æ–Ω
- –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π

**–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏:** mutex, condition variables, sync.Cond

---

### 4. Cache —Å TTL
**–í—Ä–µ–º—è: 40 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –Ω–∞ —Å–æ–±–µ—Å–∞—Ö: 65%**

–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–µ—à:
- Get/Set —Å TTL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á–∏—Å—Ç–∫–∞ expired
- RWMutex –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª–µ–π

**–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏:** RWMutex, time.Ticker, map

---

### 5. Fan-out / Fan-in
**–í—Ä–µ–º—è: 35 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞ –Ω–∞ —Å–æ–±–µ—Å–∞—Ö: 50%**

Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- 1 producer ‚Üí N workers ‚Üí 1 aggregator
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏:** channels, merge pattern, error handling

---

## –í–∞–∂–Ω—ã–µ (–¥–µ–ª–∞–π –µ—Å–ª–∏ –æ—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º—è)

### 6. Circuit Breaker
**–í—Ä–µ–º—è: 45 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞: 40%**

–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–¥–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (—Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –∏–∑ practice.go)

---

### 7. Pub/Sub
**–í—Ä–µ–º—è: 40 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞: 45%**

In-memory –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏

---

### 8. Mutex-free Counter (atomic)
**–í—Ä–µ–º—è: 20 –º–∏–Ω—É—Ç | –ß–∞—Å—Ç–æ—Ç–∞: 55%**

–°—á–µ—Ç—á–∏–∫ –±–µ–∑ –º—å—é—Ç–µ–∫—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è atomic –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ù–µ–¥–µ–ª—è 1-2: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏
- **–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:** Rate Limiter
- **–í—Ç–æ—Ä–Ω–∏–∫:** Worker Pool  
- **–°—Ä–µ–¥–∞:** Bounded Channel
- **–ß–µ—Ç–≤–µ—Ä–≥:** Cache —Å TTL
- **–ü—è—Ç–Ω–∏—Ü–∞:** Fan-out/Fan-in
- **–í—ã—Ö–æ–¥–Ω—ã–µ:** –î–æ—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–∞ —Å AI

### –ù–µ–¥–µ–ª—è 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–∏–º–µ–Ω—è–π –≤—ã—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–µ
- Code review –∫–æ–¥–∞ –æ—Ç AI
- –î–æ–±–∞–≤—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 4: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–±–µ—Å–∞–º
- –ü–µ—Ä–µ—Ä–µ—à–∞–π –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ë–ï–ó –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –ü–æ–¥–≥–æ—Ç–æ–≤—å —Ä–∞—Å—Å–∫–∞–∑ –ø—Ä–æ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç
- –ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–¥ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–∞ —Ü–µ–ª–∏–∫–æ–º

---

## –ö–∞–∫ —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏

### –®–∞–≥ 1: –ü–æ–Ω—è—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (5 –º–∏–Ω)
- –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏?
- –ö–∞–∫–∏–µ race conditions –≤–æ–∑–º–æ–∂–Ω—ã?
- –ß—Ç–æ —Å graceful shutdown?

### –®–∞–≥ 2: –ù–∞–ø–∏—Å–∞—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã (5 –º–∏–Ω)
```go
type RateLimiter struct {
    // TODO: –ø–æ–ª—è
}

func NewRateLimiter(rate int) *RateLimiter {}
func (rl *RateLimiter) Allow() bool {}
```

### –®–∞–≥ 3: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (20 –º–∏–Ω)
- –°–Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥
- –ü–æ—Ç–æ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –®–∞–≥ 4: –¢–µ—Å—Ç—ã (10 –º–∏–Ω)
```go
func TestRateLimiterConcurrent(t *testing.T) {
    rl := NewRateLimiter(100) // 100 req/sec
    
    var allowed int32
    var wg sync.WaitGroup
    
    // 1000 goroutines –ø—ã—Ç–∞—é—Ç—Å—è –≤–∑—è—Ç—å —Ç–æ–∫–µ–Ω
    for i := 0; i < 1000; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            if rl.Allow() {
                atomic.AddInt32(&allowed, 1)
            }
        }()
    }
    
    wg.Wait()
    
    // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 100 (—Å –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é)
    if allowed < 90 || allowed > 110 {
        t.Errorf("expected ~100, got %d", allowed)
    }
}
```

---

## –ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –Ω–∞ —Å–æ–±–µ—Å–µ (—á–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å)

‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å context.Done()  
‚ùå –ó–∞–±—ã—Ç—å defer wg.Done()  
‚ùå –ù–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª—ã  
‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å time.Sleep –≤–º–µ—Å—Ç–æ —Ç–∞–π–º–µ—Ä–æ–≤  
‚ùå –ù–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å race conditions  
‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å mutex –Ω–∞–¥–æ–ª–≥–æ  

---

## –ß—Ç–æ —Å–ø—Ä–æ—Å—è—Ç –Ω–∞ —Å–æ–±–µ—Å–µ –ø—Ä–æ —Ç–≤–æ–π –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª —Ç–∞–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?
- –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞?
- –ì–¥–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞?

### Concurrency
- –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è goroutines?
- –ö–∞–∫ –∏–∑–±–µ–≥–∞–µ—à—å race conditions?
- –ß—Ç–æ —Å graceful shutdown?

### Performance
- –ö–∞–∫–æ–π RPS –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç?
- –ö–∞–∫ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–ª?
- –ß—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª?

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ß—Ç–æ —Å retry –ª–æ–≥–∏–∫–æ–π?
- –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å –æ—à–∏–±–∫–∏?
- –ß—Ç–æ –µ—Å–ª–∏ Kafka/PostgreSQL —É–ø–∞–ª–∏?

**–ü–æ–¥–≥–æ—Ç–æ–≤—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ —ç—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã –∑–∞—Ä–∞–Ω–µ–µ!**

---

## –†–µ—Å—É—Ä—Å—ã

### Must read (1-2 –≤–µ—á–µ—Ä–∞)
- [Go Concurrency Patterns](https://go.dev/blog/pipelines) - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –±–ª–æ–≥
- [Effective Go - Concurrency](https://go.dev/doc/effective_go#concurrency)

### –ü—Ä–∞–∫—Ç–∏–∫–∞
- [LeetCode Concurrency](https://leetcode.com/problemset/concurrency/) - 10 –∑–∞–¥–∞—á
- –¢–≤–æ–∏ —Ñ–∞–π–ª—ã: `consumer_practice.go`, `usecase_practice.go`

---

## –ú–æ—Ç–∏–≤–∞—Ü–∏—è

### –ï—Å–ª–∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 1 —á–∞—Å –≤ –¥–µ–Ω—å:
- **–ü–Ω-–ü—Ç:** 5 –∑–∞–¥–∞—á = 5 —á–∞—Å–æ–≤ = –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ‚úÖ
- **–°–±-–í—Å:** 2-4 —á–∞—Å–∞ = –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç ‚úÖ

### –ß–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏ —Ç—ã:
‚úÖ –†–µ—à–∞–µ—à—å live coding –∑–∞ 30-40 –º–∏–Ω—É—Ç  
‚úÖ –ü–æ–Ω–∏–º–∞–µ—à—å –∫–æ–¥ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–∞  
‚úÖ –ú–æ–∂–µ—à—å –æ–±—ä—è—Å–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è  
‚úÖ –ó–Ω–∞–µ—à—å –∫–∞–∫ –Ω–∞–π—Ç–∏ race conditions  

### –≠—Ç–æ —Ä–µ–∞–ª—å–Ω–æ! üí™

---

## TL;DR

1. **–î–æ–¥–µ–ª—ã–≤–∞–π –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç —Å AI** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
2. **–î–µ–ª–∞–π code review** –∫–∞–∂–¥–æ–≥–æ –∫—É—Å–∫–∞ –∫–æ–¥–∞ –æ—Ç AI
3. **–†–µ—à–∞–π 1 –∑–∞–¥–∞—á—É –≤ –¥–µ–Ω—å** (5 –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ)
4. **–ß–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏** –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –∫ —Å–æ–±–µ—Å–∞–º
5. **–ù–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–π –≤—Å—ë —Å –Ω—É–ª—è** - –≤—Ä–µ–º—è —Ç—Ä–∞—Ç–∏—Ç—Å—è –≤–ø—É—Å—Ç—É—é

**–¢–≤–æ—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–∞, –Ω–æ –Ω–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–∞.**  
–¢—ã —É–∂–µ –¥–µ–ª–∞–µ—à—å –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–π üöÄ

